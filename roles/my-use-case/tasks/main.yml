---
- include_role:
    name: microk8s

- include_role:
    name: dt-activegate-classic
  vars:
    activegate_install_synthetic: true

- include_role:
    name: dt-operator

- include_role:
    name: monaco-v2
  vars:
    monaco_version: "v{{ monacoVersion }}"
    
- include_role:
    name: app-easytrade

- include_role:
    name: gitlab

- name: Gitlab - Ensure Group
  include_role:
    name: gitlab
    tasks_from: ensure-group
  vars:
    gitlab_group_name: "{{ gitlab_group }}"

- name: Gitlab - Ensure Default Group Vars
  include_role:
    name: gitlab
    tasks_from: ensure-default-group-vars
  vars:
    gitlab_group_name: "{{ gitlab_group }}"

- name: Gitlab - Ensure Project
  include_role:
    name: gitlab
    tasks_from: ensure-project
  vars:
    gitlab_prj: "{{ gitlab_repo_name }}"
    gitlab_prj_namespace_id: "{{ gitlab_group_id }}"

# - set_fact:
#     include_dashboard_value_file: "{{ role_path }}/templates/apps-dashboard.yml.j2"

# - include_role:
#     name: dashboard
#     tasks_from: template-values-file

- include_role:
    name: dashboard
